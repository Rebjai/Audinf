(function(e){function t(t){for(var s,o,i=t[0],u=t[1],c=t[2],d=0,m=[];d<i.length;d++)o=i[d],n[o]&&m.push(n[o][0]),n[o]=0;for(s in u)Object.prototype.hasOwnProperty.call(u,s)&&(e[s]=u[s]);l&&l(t);while(m.length)m.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],s=!0,i=1;i<a.length;i++){var u=a[i];0!==n[u]&&(s=!1)}s&&(r.splice(t--,1),e=o(o.s=a[0]))}return e}var s={},n={app:0},r=[];function o(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=s,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(a,s,function(t){return e[t]}.bind(null,s));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var l=u;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var s=a("64a9"),n=a.n(s);n.a},"2cfd":function(e,t,a){"use strict";var s=a("e07e"),n=a.n(s);n.a},"56d7":function(e,t,a){"use strict";a.r(t);var s=a("795b"),n=a.n(s),r=(a("cadf"),a("551c"),a("f751"),a("097d"),a("2b0e")),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[e.authenticated?a("nav",[a("router-link",{attrs:{to:"/"}},[e._v("Zadania")]),a("router-link",{attrs:{to:"/login"},nativeOn:{click:function(t){return e.logout()}}},[e._v("Wyloguj")])],1):a("nav",[a("router-link",{attrs:{to:"/login"}},[e._v("Zaloguj")]),a("router-link",{attrs:{to:"/register"}},[e._v("Zarejestruj")])],1),a("div",{staticClass:"content"},[a("transition",{attrs:{name:"fade",mode:"out-in"}},[a("router-view",{on:{authenticated:e.setAuthenticated}})],1)],1)])},i=[],u=(a("a481"),a("7f7f"),a("8c4f")),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"home"}},[a("span",[e._v("Zalogowany jako: "),a("span",{staticClass:"username"},[e._v(" "+e._s(e.username)+" ")])]),a("div",{staticClass:"createTask"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.newTask.name,expression:"newTask.name"}],attrs:{type:"text"},domProps:{value:e.newTask.name},on:{input:function(t){t.target.composing||e.$set(e.newTask,"name",t.target.value)}}}),a("button",{on:{click:e.createTask}},[a("i",{staticClass:"fas fa-plus"})]),a("div",{staticClass:"createTaskDate"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.newTask.term,expression:"newTask.term"}],attrs:{type:"date"},domProps:{value:e.newTask.term},on:{input:function(t){t.target.composing||e.$set(e.newTask,"term",t.target.value)}}})]),a("ul",{staticClass:"createTaskErrors"},e._l(e.errors,function(t,s){return a("li",{key:s},[e._v(" "+e._s(t)+" ")])}),0)]),e.loading?a("span",[e._v(" Wczytywanie zadań... ")]):e._e(),a("transition-group",{staticClass:"task-list",attrs:{name:"fadeTask",tag:"div"}},e._l(e.tasks,function(t){return a("task-component",{key:t._id,attrs:{task:t},on:{deleteTask:function(t){return e.deleteTask(t)}}})}),1)],1)},l=[],d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"task-item"},[a("span",{staticClass:"task-item-name"},[e._v(" "+e._s(e.task.name)+" ")]),a("button",{on:{click:function(t){return e.$emit("deleteTask",e.task._id)}}},[a("i",{staticClass:"far fa-trash-alt"})]),e.task.term?a("span",{staticClass:"task-item-date",class:e.termTimeStyle},[a("i",{staticClass:"far fa-clock"}),a("span",{staticClass:"term-date-text"},[e._v(e._s(e.task.term))])]):e._e()])},m=[],p=(a("28a5"),{props:["task"],data:function(){return{isToday:!1,isLate:!1}},computed:{todaysDate:function(){return(new Date).toISOString().split("T")[0]},termTimeStyle:function(){return{"term-today":this.todaysDate==this.task.term,"term-late":this.todaysDate>this.task.term}}}}),f=p,h=(a("fcc1"),a("2877")),v=Object(h["a"])(f,d,m,!1,null,null,null),g=v.exports,k={components:{"task-component":g},data:function(){return{username:"",newTask:{name:"",term:""},errors:[],loading:!0,tasks:[]}},methods:{deleteTask:function(e){var t=this;this.tasks.filter(function(a,s){a._id==e&&r["a"].axios.delete("task/".concat(e)).then(function(e){t.tasks.splice(s,1)}).catch(function(e){})})},createTask:function(){var e=this;this.errors=[],""==this.newTask.name.trim()?this.errors.push("Podaj treść zadania."):r["a"].axios.post("/task",{name:this.newTask.name,term:this.newTask.term}).then(function(t){e.tasks.unshift(t.data.task),e.newTask={name:"",term:""}}).catch(function(t){e.errors=[],e.errors=t.response.data.errors})},setUsernameFromToken:function(){this.username=localStorage.getItem("username")}},created:function(){var e=this;this.setUsernameFromToken(),r["a"].axios.get("/task").then(function(t){e.tasks=t.data.tasks,e.loading=!1}).catch(function(e){})}},w=k,y=(a("cccb"),Object(h["a"])(w,c,l,!1,null,null,null)),_=y.exports,b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"login"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login(t)}}},[a("label",[e._v("Nazwa użytkownika:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),a("label",[e._v("Hasło:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),a("button",{staticClass:"l-button",on:{click:e.login}},[e._v("Zaloguj")]),a("div",{staticClass:"errors"},[a("ul",e._l(e.errors,function(t,s){return a("li",{key:s},[e._v(" "+e._s(t)+" ")])}),0)])])},T=[],x={data:function(){return{username:"",password:"",errors:[]}},methods:{login:function(){var e=this;this.errors=[],""==this.username||""==this.password?this.errors.push("Wypełnij pola."):r["a"].axios.post("/user/login",{username:this.username,password:this.password}).then(function(t){localStorage.setItem("token",t.data.token),localStorage.setItem("username",e.username),r["a"].axios.defaults.headers.Authorization=localStorage.getItem("token"),e.username="",e.password="",e.$router.push({name:"home"}),e.$emit("authenticated",!0)}).catch(function(t){e.errors=t.response.data.errors})}}},C=x,j=(a("d6db"),Object(h["a"])(C,b,T,!1,null,null,null)),S=j.exports,O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"register"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.register(t)}}},[a("label",[e._v("Nazwa użytkownika:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.username,expression:"user.username"}],attrs:{type:"text"},domProps:{value:e.user.username},on:{input:function(t){t.target.composing||e.$set(e.user,"username",t.target.value)}}}),a("label",[e._v("Hasło:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],attrs:{type:"password"},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}}),a("label",[e._v("Powtórz hasło:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.passwordConfirmation,expression:"user.passwordConfirmation"}],attrs:{type:"password"},domProps:{value:e.user.passwordConfirmation},on:{input:function(t){t.target.composing||e.$set(e.user,"passwordConfirmation",t.target.value)}}}),a("button",{on:{click:e.register}},[e._v("Zarejestruj")]),a("div",{staticClass:"errors"},[a("ul",e._l(e.errors,function(t,s){return a("li",{key:s},[e._v(" "+e._s(t)+" ")])}),0),e.success?a("span",[e._v("Pomyślnie zarejestrowano")]):e._e()])])},P=[],$={data:function(){return{errors:[],success:!1,user:{username:"",password:"",passwordConfirmation:""}}},methods:{register:function(){var e=this;this.errors=[],this.success=!1,""==this.user.username&&""==this.user.password&&""==this.user.passwordConfirmation?this.errors.push("Wypełnij pola."):((this.user.username.trim().length<5||this.user.username.trim().length>16)&&this.errors.push("Nazwa użytkownika powinna zawierać od 5 do 16 znaków."),(this.user.password.length<8||this.user.password.length>15)&&this.errors.push("Hasło musi posiadać długość od 8 do 15 znaków."),this.user.password!==this.user.passwordConfirmation&&this.errors.push("Hasła muszą być takie same.")),this.errors.length||r["a"].axios.post("/user/register",{username:this.user.username,password:this.user.password,passwordConfirmation:this.user.passwordConfirmation}).then(function(t){e.success=!0,e.user.username="",e.user.password="",e.user.passwordConfirmation="",setTimeout(function(){e.success=!1},1500)}).catch(function(t){e.errors=t.response.data.errors})}}},z=$,I=(a("2cfd"),Object(h["a"])(z,O,P,!1,null,null,null)),A=I.exports;r["a"].use(u["a"]);var N=new u["a"]({routes:[{path:"/home",name:"home",component:_},{path:"/login",name:"login",component:S},{path:"/register",name:"register",component:A}]}),E={methods:{isLogged:function(){return null!==localStorage.getItem("token")},clearUserData:function(){localStorage.removeItem("token"),localStorage.removeItem("username")}}};N.beforeEach(function(e,t,a){!E.methods.isLogged()&&["login","register"].some(function(t){return t==e.name})?a():E.methods.isLogged()&&["login","register",null].some(function(t){return t==e.name})?N.replace({name:"home"}):E.methods.isLogged()?a():N.replace({name:"login"})});var D={name:"App",data:function(){return{authenticated:!1}},computed:{isLoggedIn:function(){return null!==localStorage.getItem("token")}},methods:{setAuthenticated:function(e){this.authenticated=e},checkAndSetkAuthentication:function(){this.authenticated=null!==localStorage.getItem("token")},logout:function(){E.methods.clearUserData(),this.authenticated=!1,this.$router.replace({name:"login"})}},created:function(){this.checkAndSetkAuthentication()},updated:function(){this.checkAndSetkAuthentication()}},L=D,U=(a("034f"),Object(h["a"])(L,o,i,!1,null,null,null)),Z=U.exports,H=a("bc3a"),M=a.n(H),W=a("b9a1"),J=a("a7fe"),F=a.n(J),R=M.a.create({baseURL:"https://arcane-castle-21942.herokuapp.com/api",headers:{Authorization:localStorage.getItem("token")}}),q=new W["a"](R);q.register({onResponseError:function(e){return e.response.data=JSON.parse(e.response.data),0==e.response.data.isLogged&&(E.methods.clearUserData(),N.push({name:"login"})),new n.a(function(t,a){a(e)})}}),r["a"].use(F.a,R),r["a"].config.productionTip=!1,new r["a"]({router:N,render:function(e){return e(Z)}}).$mount("#app")},"64a9":function(e,t,a){},a9e7:function(e,t,a){},cccb:function(e,t,a){"use strict";var s=a("d563"),n=a.n(s);n.a},d563:function(e,t,a){},d6db:function(e,t,a){"use strict";var s=a("a9e7"),n=a.n(s);n.a},e07e:function(e,t,a){},f182:function(e,t,a){},fcc1:function(e,t,a){"use strict";var s=a("f182"),n=a.n(s);n.a}});
//# sourceMappingURL=app.33104d22.js.map